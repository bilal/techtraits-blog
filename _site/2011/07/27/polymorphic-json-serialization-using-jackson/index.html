
<!doctype html>  
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]--> 
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]--> 
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]--> 
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]--> 
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]--> 
<head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
 
  <title>Polymorphic JSON Serialization using Jackson</title> 
  <meta name="author" content="Name Lastname" />
  <link href='http://fonts.googleapis.com/css?family=Lato:light,regular,bold'
  rel='stylesheet' type='text/css'>
  <link href="/assets/themes/jamesyu/css/
reset.css" media="screen" rel="stylesheet" type="text/css" /> 
  <link href="/assets/themes/jamesyu/css/highlight.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/assets/themes/jamesyu/css/main.css" media="screen" rel="stylesheet" type="text/css" /> 
  <link rel="alternate" type="application/rss+xml" href="/atom.xml" title="RSS feed">
</head> 
 
    <body> 
        <div id="header">
            <div class="inner">
                <ul>
                    <li><a href="http://twitter.com/username">Follow Me</a></li>
                    <li><a href="/about.html">About Me</a></li>
                </ul>
                <h1><a href="/">Name Lastname</a></h1>
                <h2></h2>
            </div>
        </div>
                
        <div id="content">
            <div class="inner">
                
<div class="post">
    <h3><a href="">Polymorphic JSON Serialization using Jackson</a></h3>
  
    <div class="body">
        <p style='text-align: justify;'>JSON is a lightweight language independent data-interchange format which is one of the common ways of encoding data over HTTP. This articles goes over the use of the <a href='http://jackson.codehaus.org/'>Jackson</a> library to serialize and deserialize Java object to JSON.</p><!--more--><h3>Project Setup</h3><pre class='markdown-html-error' style='border: solid 3px red; background-color: pink'>REXML could not parse this XML/HTML: 
&lt;p style=&quot;text-align: justify;&quot;&gt;
If you have not already done so download and install a latest copy of the &lt;a href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/index.html&quot;&gt;JDK&lt;/a&gt;. Also download the latest &lt;a href=&quot;http://jackson.codehaus.org/1.8.4/jackson-all-1.8.4.jar&quot;&gt;Jackson Jar&lt;/a&gt; file. Create a folder with the jar file, and a few classes you want to serialize. I created ParentClass.java, Child1.java and Child 2.java.
&lt;h3&gt;Parent.java&lt;/h3&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;The excerpt below shows the contents of Parent.java, note that we are annotating the class to help with serialization. The &quot;JsonTypeInfo&quot; annotation tells jackson to encode the object type in the resulting JSON output in a field called objectType. Further we are also defining the possible subtypes of Parent which any input JSON text could be serialized.&lt;/p&gt;

&lt;pre lang=&quot;java&quot;&gt;import org.codehaus.jackson.annotate.JsonSubTypes;
import org.codehaus.jackson.annotate.JsonTypeInfo;

@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property=&quot;objectType&quot;)
@JsonSubTypes({
        @JsonSubTypes.Type(value=Child1.class),
        @JsonSubTypes.Type(value=Child2.class)
})
public class ParentClass {

}&lt;/pre&gt;
&lt;h3&gt;Child1.java&lt;/h3&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;The next snippet shows the Child1 class, we have also annotated the class to encode type but we do not need to define any sub-types. The class has two fields, one of which is annotated to be a JsonProperty and the other is marked to be ignored.&lt;/p&gt;

&lt;pre lang=&quot;java&quot;&gt;import org.codehaus.jackson.annotate.JsonTypeInfo;
import org.codehaus.jackson.annotate.JsonProperty;
import org.codehaus.jackson.annotate.JsonIgnore;

@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property=&quot;objectType&quot;)
public class Child1 extends ParentClass {

	@JsonProperty
	public int SerializeMe;

	@JsonIgnore
	public int dontSerialize me;

}&lt;/pre&gt;
&lt;h3&gt;Child2.java&lt;/h3&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;&amp;nbsp;&lt;/p&gt;
Child2 is very similar except for a few differences which highlight some of the features of Jackson, first we are able serialize more complex types such as the ArrayList of type string and second, we are also able to annotate Java Bean style getters to return a JSON property even if they have no member variable to back them.
&lt;pre lang=&quot;java&quot;&gt;import org.codehaus.jackson.annotate.JsonProperty;
import org.codehaus.jackson.annotate.JsonTypeInfo;
import java.util.List;

@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property=&quot;objectType&quot;)
public class Child2 extends ParentClass {

	@JsonProperty
	public List SerializeMe;

	@JsonProperty
	public int getSerializeMeToo() {
		return 53;
	}

	@JsonProperty
	public void setSerializeMeToo(int value) {
		//Do nothing
	}

}&lt;/pre&gt;
&lt;h3&gt;Driver.java&lt;/h3&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;
Finally lets create a driver class to test our serialization and deserialization. For this we use the &lt;strong&gt;ObjectMapper&lt;/strong&gt; class which has a &lt;strong&gt;writeValueAsString&lt;/strong&gt; method. We just pass an annotated class to ObjectMapper&apos;s writeValueAsString method and get an encoded JSON string. Similarly we can use the &lt;strong&gt;readValue&lt;/strong&gt; method to deserialize JSON back to a java object. As the code below shows we pass the string representation of JSON as well as an Ancestor of the object we are deserializing. Notice how we pass &lt;strong&gt;ParentClass&lt;/strong&gt; to the readValue method but when print the clss type out you will see it outputs &quot;Child1&quot; and &quot;Child2&quot; correctly.
&lt;pre lang=&quot;java&quot;&gt;import org.codehaus.jackson.map.ObjectMapper;
import java.util.Arrays;

public class Driver {
	public static void main(String[] args) {

		try {
			ObjectMapper oMapper = new ObjectMapper();

			Child1 child1 = new Child1();
			child1.SerializeMe = 10;
			child1.dontSerializeMe = 12;
			Child2 child2 = new Child2();

			child2.SerializeMe = Arrays.asList(&quot;1&quot;,&quot;2&quot;,&quot;3&quot;);

			String outputChild1 = oMapper.writeValueAsString(child1);
			String outputChild2 = oMapper.writeValueAsString(child2);

			System.out.println(outputChild1);
			System.out.println(outputChild2);

			ParentClass inputChild1 = oMapper.readValue(outputChild1, ParentClass.class);
			ParentClass inputChild2 = oMapper.readValue(outputChild2, ParentClass.class);

			System.out.println(inputChild1.getClass().toString());
			System.out.println(inputChild2.getClass().toString());
		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}
}&lt;/pre&gt;
&lt;h3&gt;Compiling and running the code&lt;/h3&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;
To compile the code fireup a terminal or the command line and enter the following command:
&lt;pre lang=&quot;bash&quot;&gt;javac -classpath jackson-all-1.8.4.jar:./ *.java&lt;/pre&gt;
To run the code run the following command:
&lt;pre lang=&quot;bash&quot;&gt;java -classpath jackson-all-1.8.4.jar:./ Driver&lt;/pre&gt;
Your output should be something like:
&lt;pre lang=&quot;json&quot;&gt;{&quot;objectType&quot;:&quot;Child1&quot;,&quot;SerializeMe&quot;:10}
{&quot;objectType&quot;:&quot;Child2&quot;,&quot;SerializeMe&quot;:[&quot;1&quot;,&quot;2&quot;,&quot;3&quot;],&quot;serializeMeToo&quot;:53}
class Child1
class Child2&lt;/pre&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;
Notice the fact that the class name is added as a property to the output JSON, and how the dontSerializeMe feild of Child1 is ignored. Also note that the types of the objects generated from JSON are Child1 and Child2 respectively even though we told the mapper we were looking for a &lt;strong&gt;ParentClass&lt;/strong&gt; type.
&lt;h3&gt;Source Code&lt;/h3&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;
The source code shown here can be &lt;a href=&quot;http://www.techtraits.ca/wp-content/uploads/2011/07/jackson_serialization.zip&quot;&gt;Downloaded Here&lt;/a&gt;
Note that all code and other source provided here are licensed under the BSD License available &lt;a href=&apos;http://www.techtraits.ca/wp-content/uploads/2011/11/Licensing.txt&apos;&gt;Here&lt;/a&gt;. 

&lt;h3&gt;Further Reading&lt;/h3&gt;
&lt;a href=&quot;http://www.json.org/&quot;&gt;JSON&lt;/a&gt;
&lt;a href=&quot;http://jackson.codehaus.org/Download&quot;&gt;Jackson&lt;/a&gt;
&lt;a href=&quot;http://jackson.codehaus.org/Tutorial&quot;&gt;Jackson Tutorials&lt;/a&gt;</pre>
    </div>
    
    <div class="meta">    
        <ul>
          Published: 27 Jul 2011<br/>
        </ul>
	<ul class="list-category list-linear">
	  <li class="list-head">category: </li>
			
			


  
    
  


	</ul>
	<ul class="list-tag list-linear">
		<li class="list-head">tags: </li>
			
			


  
    
  



	</ul>
    </div>

    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'jekyllbootstrap'; // required: replace example with your forum shortname
    var disqus_identifier = '217 http://username.github.com/?p=217';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




</div>


            </div>
        </div>
        
        <div id="footer" class="clearfix">
            <div class="inner">
                <div class="archives">
                    <h3>Archives</h3>
            
                    <table>
                    
                        <tr>
                            <td class="date">10 Mar 2012</td>
                            <td><a href="/2012/03/10/jackson-optimization-using-non-default-for-fun-and-profit">Jackson Optimization, Using Non-Default for fun and profit</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">14 Feb 2012</td>
                            <td><a href="/2012/02/14/really-really-async-aws-sdk">Really Really Async AWS SDK</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">11 Feb 2012</td>
                            <td><a href="/2012/02/11/erlang-list-manipulation-using-comprehensions">Erlang: List Manipulation using comprehensions</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">03 Feb 2012</td>
                            <td><a href="/2012/02/03/java-optimizaiton">Java Optimizaiton, Why is my application so slow?</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">17 Jan 2012</td>
                            <td><a href="/2012/01/17/regular-expressions-in-elipse-find">Regular Expressions in Elipse Find</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">16 Jan 2012</td>
                            <td><a href="/2012/01/16/capturing-java-stack-strace-using-jstack">Capturing Java Stack Strace Using JStack</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">17 Dec 2011</td>
                            <td><a href="/2011/12/17/creating-executable-jars-with-maven">Creating executable jars with Maven</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">04 Dec 2011</td>
                            <td><a href="/2011/12/04/custum-pmd-rule-for-private-injected-fields">Custom PMD Rule for Private Injected fields</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">27 Nov 2011</td>
                            <td><a href="/2011/11/27/using-method-interceptors-with-guice">Using method interceptors with Guice</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">20 Nov 2011</td>
                            <td><a href="/2011/11/20/using-custom-serializers-with-jackson">Using Custom Serializers with Jackson</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">05 Nov 2011</td>
                            <td><a href="/2011/11/05/custom-pmd-rules-using-xpath">Custom PMD Rules using XPath</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">31 Oct 2011</td>
                            <td><a href="/2011/10/31/writting-pretty-code-with-pmd">Writing pretty code with PMD</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">31 Oct 2011</td>
                            <td><a href="/2011/10/31/thanks-i-needed-that">Thanks, I needed that</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">16 Oct 2011</td>
                            <td><a href="/2011/10/16/jsonkit">iPhone SDK: Integrating with Json using Jsonkit</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">10 Oct 2011</td>
                            <td><a href="/2011/10/10/iphonesdk-nsuserdefaults">iPhoneSDK: NSUserDefaults</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">02 Oct 2011</td>
                            <td><a href="/2011/10/02/using-cachedump-to-debug-memcached">Using cachedump to debug memcached</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">02 Oct 2011</td>
                            <td><a href="/2011/10/02/iphone-sdk-tabbars">IPhone SDK: TabBars</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">09 Sep 2011</td>
                            <td><a href="/2011/09/09/compiling-protocol-buffers-from-maven">Compiling Protocol Buffers from Maven</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">05 Sep 2011</td>
                            <td><a href="/2011/09/05/running-nexus-sontaype-over-jetty">Running Nexus Sontaype over Jetty</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">12 Aug 2011</td>
                            <td><a href="/2011/08/12/implementing-jackson-views">Implementing Jackson Views</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">27 Jul 2011</td>
                            <td><a href="/2011/07/27/polymorphic-json-serialization-using-jackson">Polymorphic JSON Serialization using Jackson</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">25 Jun 2011</td>
                            <td><a href="/2011/06/25/five-minute-guide-to-setting-up-a-java-webserver">Setting up a webservice using Guice & Sitebricks</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">12 Jun 2011</td>
                            <td><a href="/2011/06/12/iphone-sdk-hello-world">IPhone SDK Hello World</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">12 Jun 2011</td>
                            <td><a href="/2011/06/12/iphone-sdk-hello-world">IPhone SDK Hello World</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">11 Jun 2011</td>
                            <td><a href="/2011/06/11/records-in-erlang">Records in erlang</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">11 Jun 2011</td>
                            <td><a href="/2011/06/11/records-in-erlang">Records in erlang</a></td>
                        </tr>
                    
                    </table>
                </div>
                <div class="about">
                    <h3><a href="/about.html">About Me</a></h3>
                    
                    <a href="/about.html"><img src="/assets/themes/jamesyu/images/me_small.png" alt="ME" /></a>
                    <div>
                        This is yet a short description of myself. Try to keep it short. <a href="/about.html">Read more</a>
                    </div>
                </div>
            </div>
        </div>
        
    </body> 
</html>

