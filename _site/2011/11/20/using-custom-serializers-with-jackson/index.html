
<!doctype html>  
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]--> 
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]--> 
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]--> 
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]--> 
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]--> 
<head> 
  <meta charset="utf-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
 
  <title>Using Custom Serializers with Jackson</title> 
  <meta name="author" content="Name Lastname" />
  <link href='http://fonts.googleapis.com/css?family=Lato:light,regular,bold'
  rel='stylesheet' type='text/css'>
  <link href="/assets/themes/jamesyu/css/
reset.css" media="screen" rel="stylesheet" type="text/css" /> 
  <link href="/assets/themes/jamesyu/css/highlight.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="/assets/themes/jamesyu/css/main.css" media="screen" rel="stylesheet" type="text/css" /> 
  <link rel="alternate" type="application/rss+xml" href="/atom.xml" title="RSS feed">
</head> 
 
    <body> 
        <div id="header">
            <div class="inner">
                <ul>
                    <li><a href="http://twitter.com/username">Follow Me</a></li>
                    <li><a href="/about.html">About Me</a></li>
                </ul>
                <h1><a href="/">Name Lastname</a></h1>
                <h2></h2>
            </div>
        </div>
                
        <div id="content">
            <div class="inner">
                
<div class="post">
    <h3><a href="">Using Custom Serializers with Jackson</a></h3>
  
    <div class="body">
        <pre class='markdown-html-error' style='border: solid 3px red; background-color: pink'>REXML could not parse this XML/HTML: 
&lt;p style=&quot;text-align: justify;&quot;&gt;
&lt;a href=&quot;http://jackson.codehaus.org/&quot; title=&quot;Jackson&quot; target=&quot;_blank&quot;&gt;Jackson&lt;/a&gt; is a powerful library which can automatically serialize to and from JSON to Java and I have made extensive use of it in my projects. To integration with jackson you annotate the fields within your &lt;a href=&quot;http://en.wikipedia.org/wiki/Plain_Old_Java_Object&quot; title=&quot;Plain_Old_Java_Object&quot; target=&quot;_blank&quot;&gt;POJOs&lt;/a&gt; with the @JsonProperty annotation. Then using a JSON Mapper you can convert the POJOs to JSON and JSON to POJOs. For more details see my earlier article (&lt;a href=&quot;http://www.techtraits.ca/polymorphic-json-serialization-using-jackson/&quot; title=&quot;Polymorphic JSON Serialization using Jackson&quot; target=&quot;_blank&quot;&gt;Polymorphic JSON Serialization using Jackson&lt;/a&gt;). However, sometimes the default behavior of the jackson mapper falls short. In one of my projects I needed to serialize a Java class to a specific integer field within that object. This is not possible using the default &lt;a href=&quot;http://jackson.codehaus.org/1.9.0/javadoc/index.html&quot; title=&quot;Object Mapper&quot; target=&quot;_blank&quot;&gt;ObjectMapper&lt;/a&gt; or its &lt;a href=&quot;http://jackson.codehaus.org/1.7.0/javadoc/org/codehaus/jackson/map/SerializationConfig.Feature.html&quot; title=&quot;Serialization Config&quot; target=&quot;_blank&quot;&gt;serialization config&lt;/a&gt;. This is where custom serializes come in using &lt;a href=&quot;http://jackson.codehaus.org/1.2.1/javadoc/index.html?org/codehaus/jackson/map/annotate/JsonSerialize.html&quot; title=&quot;JSONSerializer&quot; target=&quot;_blank&quot;&gt;Json Serializer&lt;/a&gt; comes to the rescue. This article describes the use of custom serializers and deseralizers with the Jackson library.   
&lt;!--more--&gt;
&lt;h3&gt;Getting started&lt;/h3&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;
As a starting point I will use the code in my earlier article &lt;a href=&quot;http://www.techtraits.ca/polymorphic-json-serialization-using-jackson/&quot; target=&quot;_blank&quot;&gt;Polymorphic JSON Serialization using Jackson&lt;/a&gt; which can be downloaded &lt;a href=&quot;http://www.techtraits.ca/wp-content/uploads/2011/07/jackson_serialization.zip&quot; title=&quot;Jackson Serialization&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p style=&quot;text-align: justify;&quot;&gt;
In the source files you downloaded open Child1.java, look for the SerializeMe property. It is annotated with the JSON Property and will there for be serialized to an integer. What if we wanted to write the string representation of the integer rather than a number. i.e. If the  field value was 3 we would write it as &quot;three&quot;. The first step is to annotate the property with the &lt;font color=&quot;green&quot;&gt;@JsonSerialize&lt;/font&gt; and &lt;font color=&quot;green&quot;&gt;@JsonDeserialize&lt;/font&gt; annotations and provide the custom classes we want to use for serialization and deserialization as shown below.   


&lt;pre lang=&quot;java&quot;&gt;
	@JsonSerialize(using = CustomSerializer.class)
	@JsonDeserialize(using = CustomDeSerializer.class)
	@JsonProperty
	public int SerializeMe;
&lt;/pre&gt;

&lt;h3&gt;Implementing the Custom Serializer&lt;/h3&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;
In order to implement a custom serializer we must extend the JsonSerializer class and define the template type to be the type for our annotated field. In our case the annotated field is on &quot;int&quot; type. Primitive types are automatically boxed into their respective object types, hence we will be using the Integer type. We override the serialize method which will receive the value of the field in the value parameter. Using the input value we can define what output we want to generate and then write it using the generator parameter. The generator class has many functions for writing the various Json types, we will be using the writeString method for our serializer however a complete list of methods is available &lt;a href=&quot;http://jackson.codehaus.org/1.4.2/javadoc/org/codehaus/jackson/JsonGenerator.html&quot; title=&quot;JsonGenerator&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt;. I am writing a a small converter which generates the string value of input integers, see code below. 
&lt;pre lang=&quot;java&quot;&gt;
public class CustomSerializer extends JsonSerializer&lt;Integer&gt; {

	@Override
	public void serialize(Integer value, JsonGenerator generator, SerializerProvider provider) throws IOException,
			JsonProcessingException {

		if (value == 1) {
			generator.writeString(&quot;one&quot;);
		} else if (value == 2) {
			generator.writeString(&quot;two&quot;);
		} else if (value == 3) {
			generator.writeString(&quot;three&quot;);
		} else {
			generator.writeString(&quot;A big number&quot;);
		}
	}
}
&lt;/pre&gt;</pre><h3>Implementing the Custom Deserializer</h3><p style='text-align: justify;'>
You can setup custom object deserialization in exactly the same fashion by extending the JsonDeserializer class and overriding the deserialize method. This method has a parser parameter which we can use to retrieve the Json data as shown below.
</p><pre lang='java'>
	@Override
	public Integer deserialize(JsonParser parser, DeserializationContext context) throws IOException,
			JsonProcessingException {

		String value = parser.getText();
		if (value.equals("one")) {
			return 1;
		} else if (value.equals("two")) {
			return 2;
		} else if (value.equals("three")) {
			return 3;
		} else {
			return 0;
		}
	}
</pre><h3>Testing the code</h3><pre class='markdown-html-error' style='border: solid 3px red; background-color: pink'>REXML could not parse this XML/HTML: 
&lt;p style=&quot;text-align: justify;&quot;&gt;
Open up the Driver.java file from the downloaded sources and replace the main method with the code shown below. In this code we are creating and initializing an instance of the Child1 class and then writing it using a Jackson Object mapper. When you run this code you should see &lt;font color=&quot;green&quot;&gt;{&quot;objectType&quot;:&quot;Child1&quot;,&quot;SerializeMe&quot;:&quot;three&quot;}&lt;/font&gt;. If you delete the annotations from the Child one class and rerun the code you should see &lt;font color=&quot;green&quot;&gt;{&quot;objectType&quot;:&quot;Child1&quot;,&quot;SerializeMe&quot;:3}&lt;/font&gt;. When we deserialize we see that the value is again stored in the object as 3.  This simple and admittedly contrived example shows the power of custom serializers. I have used these in several projects to format responses according to client requirements without impacting server Object designs.       

&lt;pre lang=&quot;java&quot;&gt;
		public static void main(String[] args) {

		try {
			ObjectMapper oMapper = new ObjectMapper();

			Child1 child1 = new Child1();
			child1.SerializeMe = 3;
			child1.dontSerializeMe = 12;
			String outputChild1 = oMapper.writeValueAsString(child1);
			System.out.println(outputChild1);
			ParentClass inputChild1 = oMapper.readValue(outputChild1, ParentClass.class);
			System.out.println(((Child1) inputChild1).SerializeMe);

		} catch (Exception ex) {
			ex.printStackTrace();
		}
	}
&lt;/pre&gt;




&lt;h3&gt;Source code&lt;/h3&gt;
The source code for this project is released under the &lt;a href=&apos;http://www.techtraits.ca/wp-content/uploads/2011/11/Licensing.txt&apos;&gt;BSD License&lt;/a&gt; and can be downloaded &lt;a href=&apos;http://www.techtraits.ca/wp-content/uploads/2011/11/custom_serializer.zip&apos;&gt;here&lt;/a&gt;. 

&lt;h3&gt;External Links&lt;/h3&gt;
&lt;p style=&quot;text-align: justify;&quot;&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a title=&quot;Jackson&quot; href=&quot;http://jackson.codehaus.org/&quot;&gt;http://jackson.codehaus.org/&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://jackson.codehaus.org/1.9.0/javadoc/index.html&quot; title=&quot;Object Mapper&quot; target=&quot;_blank&quot;&gt;Object Mapper&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://jackson.codehaus.org/1.7.0/javadoc/org/codehaus/jackson/map/SerializationConfig.Feature.html&quot; title=&quot;Serialization Config&quot; target=&quot;_blank&quot;&gt;Jackson serialization config&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://jackson.codehaus.org/1.2.1/javadoc/index.html?org/codehaus/jackson/map/annotate/JsonSerialize.html&quot; title=&quot;JSONSerializer&quot; target=&quot;_blank&quot;&gt;Json Serializer&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Image curtesy of Eric Miraglia &lt;a href=&quot;http://www.flickr.com/photos/equanimity/3762360637/&quot; title=&quot;Eric Miraglia&quot; target=&quot;_blank&quot;&gt;&lt;/a&gt; &lt;/li&gt;




&lt;/ul&gt;</pre>
    </div>
    
    <div class="meta">    
        <ul>
          Published: 20 Nov 2011<br/>
        </ul>
	<ul class="list-category list-linear">
	  <li class="list-head">category: </li>
			
			


  
    
  


	</ul>
	<ul class="list-tag list-linear">
		<li class="list-head">tags: </li>
			
			


  
    
  



	</ul>
    </div>

    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'jekyllbootstrap'; // required: replace example with your forum shortname
    var disqus_identifier = '628 http://username.github.com/?p=628';
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




</div>


            </div>
        </div>
        
        <div id="footer" class="clearfix">
            <div class="inner">
                <div class="archives">
                    <h3>Archives</h3>
            
                    <table>
                    
                        <tr>
                            <td class="date">10 Mar 2012</td>
                            <td><a href="/2012/03/10/jackson-optimization-using-non-default-for-fun-and-profit">Jackson Optimization, Using Non-Default for fun and profit</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">14 Feb 2012</td>
                            <td><a href="/2012/02/14/really-really-async-aws-sdk">Really Really Async AWS SDK</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">11 Feb 2012</td>
                            <td><a href="/2012/02/11/erlang-list-manipulation-using-comprehensions">Erlang: List Manipulation using comprehensions</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">03 Feb 2012</td>
                            <td><a href="/2012/02/03/java-optimizaiton">Java Optimizaiton, Why is my application so slow?</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">17 Jan 2012</td>
                            <td><a href="/2012/01/17/regular-expressions-in-elipse-find">Regular Expressions in Elipse Find</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">16 Jan 2012</td>
                            <td><a href="/2012/01/16/capturing-java-stack-strace-using-jstack">Capturing Java Stack Strace Using JStack</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">17 Dec 2011</td>
                            <td><a href="/2011/12/17/creating-executable-jars-with-maven">Creating executable jars with Maven</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">04 Dec 2011</td>
                            <td><a href="/2011/12/04/custum-pmd-rule-for-private-injected-fields">Custom PMD Rule for Private Injected fields</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">27 Nov 2011</td>
                            <td><a href="/2011/11/27/using-method-interceptors-with-guice">Using method interceptors with Guice</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">20 Nov 2011</td>
                            <td><a href="/2011/11/20/using-custom-serializers-with-jackson">Using Custom Serializers with Jackson</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">05 Nov 2011</td>
                            <td><a href="/2011/11/05/custom-pmd-rules-using-xpath">Custom PMD Rules using XPath</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">31 Oct 2011</td>
                            <td><a href="/2011/10/31/writting-pretty-code-with-pmd">Writing pretty code with PMD</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">31 Oct 2011</td>
                            <td><a href="/2011/10/31/thanks-i-needed-that">Thanks, I needed that</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">16 Oct 2011</td>
                            <td><a href="/2011/10/16/jsonkit">iPhone SDK: Integrating with Json using Jsonkit</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">10 Oct 2011</td>
                            <td><a href="/2011/10/10/iphonesdk-nsuserdefaults">iPhoneSDK: NSUserDefaults</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">02 Oct 2011</td>
                            <td><a href="/2011/10/02/using-cachedump-to-debug-memcached">Using cachedump to debug memcached</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">02 Oct 2011</td>
                            <td><a href="/2011/10/02/iphone-sdk-tabbars">IPhone SDK: TabBars</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">09 Sep 2011</td>
                            <td><a href="/2011/09/09/compiling-protocol-buffers-from-maven">Compiling Protocol Buffers from Maven</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">05 Sep 2011</td>
                            <td><a href="/2011/09/05/running-nexus-sontaype-over-jetty">Running Nexus Sontaype over Jetty</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">12 Aug 2011</td>
                            <td><a href="/2011/08/12/implementing-jackson-views">Implementing Jackson Views</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">27 Jul 2011</td>
                            <td><a href="/2011/07/27/polymorphic-json-serialization-using-jackson">Polymorphic JSON Serialization using Jackson</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">25 Jun 2011</td>
                            <td><a href="/2011/06/25/five-minute-guide-to-setting-up-a-java-webserver">Setting up a webservice using Guice & Sitebricks</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">12 Jun 2011</td>
                            <td><a href="/2011/06/12/iphone-sdk-hello-world">IPhone SDK Hello World</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">12 Jun 2011</td>
                            <td><a href="/2011/06/12/iphone-sdk-hello-world">IPhone SDK Hello World</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">11 Jun 2011</td>
                            <td><a href="/2011/06/11/records-in-erlang">Records in erlang</a></td>
                        </tr>
                    
                        <tr>
                            <td class="date">11 Jun 2011</td>
                            <td><a href="/2011/06/11/records-in-erlang">Records in erlang</a></td>
                        </tr>
                    
                    </table>
                </div>
                <div class="about">
                    <h3><a href="/about.html">About Me</a></h3>
                    
                    <a href="/about.html"><img src="/assets/themes/jamesyu/images/me_small.png" alt="ME" /></a>
                    <div>
                        This is yet a short description of myself. Try to keep it short. <a href="/about.html">Read more</a>
                    </div>
                </div>
            </div>
        </div>
        
    </body> 
</html>

